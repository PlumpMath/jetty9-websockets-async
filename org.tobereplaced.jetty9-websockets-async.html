<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>org.tobereplaced.jetty9-websockets-async documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Jetty9-websockets-async 0.2.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="org.tobereplaced.jetty9-websockets-async.html"><span>org.tobereplaced.jetty9-websockets-async</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="org.tobereplaced.jetty9-websockets-async.html#var-connect%21"><span>connect!</span></a></li><li><a href="org.tobereplaced.jetty9-websockets-async.html#var-org.tobereplaced.jetty9_websockets_async.proxy%24org.eclipse.jetty.websocket.api.WebSocketAdapter%240"><span>org.tobereplaced.jetty9_websockets_async.proxy$org.eclipse.jetty.websocket.api.WebSocketAdapter$0</span></a></li><li><a href="org.tobereplaced.jetty9-websockets-async.html#var-org.tobereplaced.jetty9_websockets_async.proxy%24org.eclipse.jetty.websocket.servlet.WebSocketServlet%240"><span>org.tobereplaced.jetty9_websockets_async.proxy$org.eclipse.jetty.websocket.servlet.WebSocketServlet$0</span></a></li><li><a href="org.tobereplaced.jetty9-websockets-async.html#var-servlet"><span>servlet</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>org.tobereplaced.jetty9-websockets-async documentation</h2><pre class="doc">A WebSocketServlet for Jetty 9 that offloads WebSocket
communication to core.async channels.</pre><div class="public" id="var-connect%21"><h3>connect!</h3><div class="usage"><code>(connect! client uri read-channel write-channel)</code></div><pre class="doc">Connects a WebSocket client to uri.  Returns a channel that will
receive a connection map if the connection is made successfully or
an exception.

The connection map contains a :process-channel for the underlying
process, a :session for the underlying Session object, a
:read-channel, and a :write-channel.

The :read-channel and :write-channel may be used to read and write
messages over the WebSocket.

The :process-channel will return nil when the write-channel is
closed, a vector containing a status code and message when the other
side closes the connection, or an exception if an error occurs.

The underlying process only handles strings, so you must place
strings on the channel.  If you do not, the process will crash
silently.</pre></div><div class="public" id="var-org.tobereplaced.jetty9_websockets_async.proxy%24org.eclipse.jetty.websocket.api.WebSocketAdapter%240"><h3>org.tobereplaced.jetty9_websockets_async.proxy$org.eclipse.jetty.websocket.api.WebSocketAdapter$0</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-org.tobereplaced.jetty9_websockets_async.proxy%24org.eclipse.jetty.websocket.servlet.WebSocketServlet%240"><h3>org.tobereplaced.jetty9_websockets_async.proxy$org.eclipse.jetty.websocket.servlet.WebSocketServlet$0</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-servlet"><h3>servlet</h3><div class="usage"><code>(servlet connection-channel read-channel-fn write-channel-fn)</code><code>(servlet connection-channel read-channel-fn write-channel-fn preconnect)</code></div><pre class="doc">Returns a WebSocketServlet to communicate over WebSockets through
channels.

When an incoming WebSocket connection is attempted, the
corresponding ring request map will be passed to the preconnect
function (default: identity).  If the preconnect function returns a
truthy value, a connection is established and a connection map is
placed on the connection channel.  In the event that the connection
attempt fails for whatever reason, an exception is placed on the
connection channel instead.

The connection map contains a :process-channel for the underlying
process, a :session for the underlying Session object, a
:read-channel, :write-channel, and :preconnect-result.

The :read-channel and :write-channel may be used to read and write
messages over the WebSocket.  The :preconnect-result may contain
anything you would like.  One usage could be to use the preconnect
function to authorize the connection via a session-cookie and return
the session-cookie as the result.

The :process-channel will return nil when the write-channel is
closed, a vector containing a status code and message when the other
side closes the connection, or an exception if an error occurs.

The underlying process only handles strings, so you must place
strings on the channel.  If you do not, the process will crash
silently.</pre></div></div></body></html>